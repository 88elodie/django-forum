{% extends 'base.html' %}

{% block title %}Posts{% endblock %}

{% block content %}

<article class="post-form-container">

<h2>{% if id %} edit {% else %} create {% endif %} post</h2>

{% if messages %}
<section class="messages">
    {% for message in messages %}
    {% if message.tags == 'error' %}
    <p{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</p>
    {% endif %}
    {% endfor %}
</section>
{% endif %}

<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    {% for field in form %}
	<p>
		{% if field.errors %}
		<ul class="errorlist">
			{% for error in field.errors %}
			<li>{{ error }}</li>
			{% endfor %}
		</ul>
		{% endif %}
	 	{{ field.label_tag }} <br> {{ field }}
	</p>
	{% endfor %}
	{% if id %}
	{% else %}
	<input type="file" name="filepond" multiple>
	{% endif %}
    <button type="submit">{% if id %} save {% else %} publish {% endif %} post</button>
  </form>

</article>

{% if id %}
<script>
 let imageUrls = JSON.parse("{{filesJson|escapejs}}")
</script>
{% endif %}
  
  
{% endblock %}